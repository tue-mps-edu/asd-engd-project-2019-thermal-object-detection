# Requirements

After identifying the stakeholders and their concerns/needs, requirements are made. The requirements shown in the table below are all in the scope of the project (written in a SMART manner). These requirements will be verified in later stages of the project. 

***bold Italic requirements are met***. 

| ID # | Description of requirement                                   | Justification                                                |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1    | The object detection system must detect pedestrians, bicyclists and vehicles | These objects should be classified in order to prove the concept of thermal object detection. (partly met requirement, as the FLIR dataset contains bicyclists, but the beta test dataset does not) |
| 2    | ***The intersection over union (IoU) value of a detection must be at least 50% when the algorithm is producing an inference*** | ***If at least 50% of the detection is within the bounds of the true object, it can be classified as a certain object*** |
| 3    | ***The object detection system must produce the inference within 10 ms after the data from the thermal camera is received by the object detector*** | ***As the thermal camera has a frame rate of 30 FPS, the object detector is allowed to have a maximum of 10ms. The remaining time before the next frame comes in is reserved for the control node*** |
| 4    | The object detection system must detect objects in a range of at least 20 meter in front of the car when the car containing the thermal camera is standing still | This is the distance required to detect objects in order to take the relevant corrective action |
| 5    | ***The thermal camera must be mounted on the roof of the vehicle via a mounting system*** | ***It is not possible to place the camera inside the vehicle (too many other equipment plus glass will interfere with the thermal camera)*** |
| 6    | ***The size of the mounting system for the thermal camera must be smaller than 210x210x250 mm*** | ***This is the maximum size of the available 3D printer***   |
| 7    | ***The mounting of the Jetson Xavier must be in the back of the car (in the trunk) on a free place at the pre-installed base plate*** | ***There is no significant loss of signal quality when installed inside in the back of the car (Anweshan Das). More waterproof. Less work to make housing for installing on top of the roof*** |
| 8    | ***The USB cable from the thermal camera to the NVIDIA Jetson must be at most 5 meter long*** | ***No frames should be lost due to bad signal distribution (too long cables)*** |
| 9    | ***The camera mounting system must be attached to the roof of the car via bolts which fit into the M5 holes in the roof of the car*** | ***At this position it is possible to have a clear field of view. Secondly, the bolts into the holes is a Robust option*** |
| 10   | ***The mounting system must allow the USB cable to be attached to the camera*** | ***This is essential for receiving data. Without proper connection between the USB cable and connector there will be no constant data flow*** |
| 11   | ***The thermal camera must be attached to the mounting system by two independent locking systems (locking ring and bolts on the side)*** | ***Stability, no fuzzy images because of vibrations. Backup in case one of the attaching systems breaks*** |
| 12   | ***The probability-class value of a detected object must be at least 60 percent in order to classify the object in a certain class*** | ***This number is often used in literature and can tell with sufficient certainty that it will lead to accurate detection. The designer can change this percentage according to his preference*** |
| 13   | ***Together with the software package install scripts and instructions must be provided*** | ***This should not take too long as it is really inconvenient for the user if he doesn't have a proper guide containing instructions*** |
| 14   | ***While using the object detection system on the vehicle, it must run for one hour continuously without crashing*** | ***The system should work for at least one hour in order to give data when testing*** |
| 15   | ***The object detection system must be optimized using TensorRT*** | ***This is a requirement from the stakeholder. This is also compatible with the Jetson Xavier*** |

Some stakeholders came up with requirements. In the table below the ones are listed that are not implemented or not feasible for this project, together with a clarification why these are not implemented. Table with unfeasible or ignored requirements:

| ID # | Description                                                  | justification                                                | Why not feasible/implemented?                                |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 16   | The object detection system must detect vehicles, pedestrians, mopeds, cyclists and motor bikes after the data from the thermal camera is received by the object detector | These objects are the most frequent road users in the Netherlands. We want to detect dynamic objects, no static objects (trees, houses). | Need a lot of training data (3+ million trained images) which is not feasible within the project timeline given |
| 17   | The object detection system must give the distance of the preceding object from the vehicle | It can send this information to the control algorithm of the car | Project time, only one camera, other strategies not accurate enough, focus is only on creating inference |
| 18   | The object detection system must detect with precision and recall of at least 98% (10-fold cross validation) at all times | Required precision and recall from the stakeholders to meet system reliability | Need a lot of training data (3+ million trained images) which is not feasible within the project timeline given |
| 19   | The object detection system has to detect the objects at all day and night weather conditions | Safety has to be guaranteed, so no missed detections are allowed to happen. | The weather conditions differ during the year, only 8 weeks project. The thermal image of captured environment depends on difference ambient temperature in day and night |
| 20   | The object detection system must be compatible in a PC environment in the autonomous vehicle (CUDA 9.0, Ubuntu 16.04, ROS Kinetic) | This is for deploying the system on the CPU of the car which will make inference | We will not deploy the system on the PC in the car, but on a NVIDIA Jetson Xavier which runs with CUDA10, Ubuntu 18.04 and RPS Melodic |
| 21   | The total thermal camera assembly needs to be water resistant | To prevent the thermal camera from malfunctioning when it is raining. It does not need to be waterproof as the car is not allowed to drive when it is raining | The stakeholder did not put high priority on this requirement, and due to limited time we skipped this requirement |
| 22   | The mounting system height must be such that the images contain no unnecessary information like the car roof or bonnet | This is useless information and could result into missed detections | This will consume a lot of time and material when 3D printing this bracket so the stakeholder (Tijs van der Smagt) advised us to decrease the height |
| 23   | The object detection system must detect animals              | Animals are sometimes also present in traffic situations     | Not enough time to acquire a dataset for all animals         |
| 24   | The output format must be compatible with the ROS node in the CPU of the car | For later usage in the CPU setup of the car it will be useful for AIIM to integrate the system into their computer | We did not have the possibility to work on this because of illness and due to the coronavirus outbreak. The car was not available to test this feature |
| 25   | The system is validated using 100 KM night-time driving in urban and rural scenarios | Stakeholder requirement for validation of the system         | The AIIM car was not available to drive for 100 kilometers, so we replaced this requirement with requirement number 15 |

